/******************************************
*  Copyright 2024 Alejandro Sebastian Scotti, Scotti Corp.
*
*  Licensed under the Apache License, Version 2.0 (the "License");
*  you may not use this file except in compliance with the License.
*  You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
*  Unless required by applicable law or agreed to in writing, software
*  distributed under the License is distributed on an "AS IS" BASIS,
*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
*  See the License for the specific language governing permissions and
*  limitations under the License.

*  @author Alejandro Sebastian Scotti
*  @version 0.0.1
*******************************************/
function mamboTools() { const tools = {class:{}};
tools.class.APIManager=function(O){let d,f,w={};this.delete=D,this.get=y,this.getCache=i,this.getFile=j,this.getFileContent=m,this.getJSON=a,this.getXML=p,this.head=x,this.patch=_,this.post=P,this.postJSON=A,this.put=R,l();async function D(r,t){let s={method:"DELETE"};return delete t?.method,s=tools.utils().extend(!0,s,t),S(await b(r,s),{response:!0})}async function y(r,t){let s={url:r};return delete t?.method,s=tools.utils().extend(!0,s,t),S(await b(r,s),{response:!0})}async function j(r,t){let s={};delete t?.method,delete t?.response,s=tools.utils().extend(!0,s,t);let u=e(r,s);return S(await b(r,s,u),{...t,url:r},"blob",u)}async function m(r,t){let s={};delete t?.method,delete t?.response,s=tools.utils().extend(!0,s,t);let u=e(r,s);return S(await b(r,s,u),{...t,url:r},"text",u)}async function a(r,t){let s={headers:{Accept:"application/json"}};delete t?.method,delete t?.headers?.Accept,delete t?.response,s=tools.utils().extend(!0,s,t);let u=e(r,s);return S(await b(r,s,u),{...t,url:r},"json",u)}async function p(r,t){let s={headers:{Accept:"application/xml"}};delete t?.method,delete t?.headers?.Accept,delete t?.response,s=tools.utils().extend(!0,s,t);let u=e(r,s);return S(await b(r,s,u),{...t,url:r},"xml",u)}async function x(r,t){let s={method:"HEAD"};return delete t?.method,s=tools.utils().extend(!0,s,t),S(await b(r,s),{response:!0})}async function _(r,t){let s={method:"PATCH"};return tools.utils().isObject(t?.body)&&(t.body=JSON.stringify(t.body)),delete t?.method,s=tools.utils().extend(!0,s,t),S(await b(r,s),{response:!0})}async function P(r,t){let s={method:"POST"};return tools.utils().isObject(t?.body)&&(t.body=JSON.stringify(t.body)),delete t?.method,s=tools.utils().extend(!0,s,t),S(await b(r,s),{response:!0})}async function A(r,t){let s={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}};tools.utils().isObject(t?.body)&&(t.body=JSON.stringify(t.body)),delete t?.method,delete t?.headers?.Accept,delete t?.headers?.["Content-Type"],delete t?.response,s=tools.utils().extend(!0,s,t);let u=e(r,s);return S(await b(r,s,u),{...t,url:r},"json",u)}async function R(r,t){let s={method:"PUT"};return tools.utils().isObject(t?.body)&&(t.body=JSON.stringify(t.body)),delete t?.method,s=tools.utils().extend(!0,s,t),S(await b(r,s),{response:!0})}async function S(r,t,s,u){let Y,n;if(r&&(Y=r.clone()),q(r,t.url,u).catch(o=>L("api_error",o)),M(t.url,u))return H(t.url,u);if(t?.response)return Y;if(s==="json")return n=r.ok?U(t?.format,Y):{},c(t,u,n),n;if(s==="blob")return n=r.ok?Y.blob():{},c(t,u,n),n;if(s==="text")return n=r.ok?Y.text():{},c(t,u,n),n;if(s==="xml")return n=r.ok?F(t?.format,Y):new DOMParser().parseFromString("","text/xml"),c(t,u,n),n}async function b(r,t,s){let u={url:r,options:{method:"GET",signal:AbortSignal.timeout(d.timeout)}};if(delete t?.signal,u=tools.utils().extend(!0,u,{options:t}),J(t),h(t.cached,r),!(s&&M(r,s)))try{return await $(u)}catch(Y){return C(Y)}}async function $({url:r,options:t}){L("api_loadstart",!0);let s=await fetch(r,t),u=await C(s);return u||s}function C(r){return new Promise((t,s)=>{if(r.name){let u={statusText:r.message,ok:!1,status:404};t(new Response("Error",u))}r.ok?t(!1):t(r)})}async function F(r,t){return r==="string"?(await t.text()).replace(/[\u00A0-\u9999<>\&]/g,function(u){return"&#"+u.charCodeAt(0)+";"}):r==="xml"?new DOMParser().parseFromString(await t.text(),"text/xml"):t.text()}async function U(r,t){return r==="string"?JSON.stringify(await t.json()):r==="pretty"?JSON.stringify(await t.json(),null,2):t.json()}async function q(r,t,s){let u=!1,Y={loaded:0,total:0,percentage:100,complete:!0,content:null,cancel:()=>{f.remove(),u=!0}};if(M(t,s)){L("api_progress",Y),L("api_load",!0);return}let n=r.body.getReader(),o=r.headers.get("Content-Length")||0,g=0,v=[];for(;;){let{done:I,value:E}=await n.read();if(I||u){Y.complete=I,L("api_progress",Y),L("api_load",!0),f.remove();break}v.push(E),g+=E.length,o===0&&(o=g),Y.loaded=g,Y.total=o,Y.percentage=g/o*100,Y.complete=I,Y.content=v,L("api_progress",Y)}}function J(r){f=document.createElement("div"),r?.events&&r.events(N()),L("api_loadstart",!1),L("api_load",!1)}function N(){let r=["api_error","api_load","api_loadstart","api_progress"],t={};return r.forEach(s=>{let u=s.split("_")[1];t[u]=Y=>{T(s,n=>Y(n))}}),t}function T(r,t){f.addEventListener(r,s=>t(s.detail))}function L(r,t){f.dispatchEvent(new CustomEvent(r,{detail:t}))}function e(r,t){return btoa(r+JSON.stringify(t))}function c(r,t,s){(d.cache&&r.cached!==!1||r.cached===!0)&&(w[r.url]||(w[r.url]={}),w[r.url][t]=s)}function M(r,t){return!!(w[r]&&w[r][t])}function h(r,t){r===!1&&w[t]&&delete w[t]}function H(r,t){return w[r][t]}function i(){return w}function l(){d={timeout:5e3},O&&(d=tools.utils().extend(!0,d,O))}},tools.api=k=>new tools.class.APIManager(k);tools.class.DateManager=function(){let O=this,d=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],w=["January","February","March","April","May","June","July","August","September","October","November","December"];this.add=_,this.cloneDate=q,this.createDate=j,this.createInterval=P,this.endOf=U,this.format=y,this.getDate=A,this.getDayName=p,this.getToday=D,this.isAfter=b,this.isSameOrAfter=$,this.isBefore=R,this.isSame=C,this.isSameOrBefore=S,this.isDate=N,this.startOf=F;function D(){let e=new Date;return e.setHours(0,0,0,0),e}function y(e,c){if(!N(e)||!T(c))return"";let M=c.match(d),h="";return M.forEach(H=>{let i="";switch(H){case"H":i=m(e,!1);break;case"HH":i=J(m(e,!1),2);break;case"h":i=m(e,!0);break;case"hh":i=J(m(e,!0),2);break;case"m":i=e.getMinutes();break;case"mm":i=J(e.getMinutes(),2);break;case"a":i=a(e);break;case"A":i=a(e).toUpperCase();break;case"D":i=e.getDate();break;case"DD":i=J(e.getDate(),2);break;case"ddd":i=p(e.getDay()).substring(0,3);break;case"dddd":i=p(e.getDay());break;case"M":i=e.getMonth()+1;break;case"MM":i=J(e.getMonth()+1,2);break;case"MMM":i=x(e.getMonth()).substring(0,3);break;case"MMMM":i=x(e.getMonth());break;case"YY":i=e.getFullYear().toString().slice(-2);break;case"YYYY":i=e.getFullYear();break;default:i=H}h+=i}),h}function j(e,c){if(!T(e)||!T(c))return null;let M=0,h={y:0,M:0,d:1,h:0,m:0,s:0,ms:0},H=c.match(d),i=0,l=e;for(let r=0,t=H.length;r<t;r++){let s=H[r];switch(s){case"H":if(/^(1\d|2[0-3])$/g.test(l.substring(0,2)))i=2;else if(/^(\d)$/g.test(l.substring(0,1)))i=1;else return null;h.h=parseInt(l.substring(0,i));break;case"HH":if(/^([0-1]\d|2[0-3])$/g.test(l.substring(0,2)))i=2;else return null;h.h=parseInt(l.substring(0,i));break;case"h":if(/^(1[0-2])$/g.test(l.substring(0,2)))i=2;else if(/^(\d)$/g.test(l.substring(0,1)))i=1;else return null;h.h=parseInt(l.substring(0,i));break;case"hh":if(/^([0]\d|1[0-2])$/g.test(l.substring(0,2)))i=2;else return null;h.h=parseInt(l.substring(0,i));break;case"m":if(/^([1-5]\d)$/g.test(l.substring(0,2)))i=2;else if(/^(\d)$/g.test(l.substring(0,1)))i=1;else return null;h.m=parseInt(l.substring(0,i));break;case"mm":if(/^([0-5]\d)$/g.test(l.substring(0,2)))i=2;else return null;h.m=parseInt(l.substring(0,i));break;case"a":case"A":/^(am)$/gi.test(l.substring(0,2))?(i=2,h.h=h.h===12?0:h.h):/^(pm)$/gi.test(l.substring(0,2))?(i=2,h.h=h.h<12?h.h+12:h.h):i=0;break;case"D":if(/^([1-2]\d|3[0-1])$/g.test(l.substring(0,2)))i=2;else if(/^([1-9])$/g.test(l.substring(0,1)))i=1;else return null;h.d=parseInt(l.substring(0,i));break;case"DD":if(/^(0[1-9]|[1-2]\d|3[0-1])$/g.test(l.substring(0,2)))i=2;else return null;h.d=parseInt(l.substring(0,i));break;case"M":if(/^(1[0-2])$/g.test(l.substring(0,2)))i=2;else if(/^([1-9])$/g.test(l.substring(0,1)))i=1;else return null;h.M=parseInt(l.substring(0,i))-1;break;case"MM":if(/^(0[1-9]|1[0-2])$/g.test(l.substring(0,2)))i=2;else return null;h.M=parseInt(l.substring(0,i))-1;break;case"MMM":if(M=w.findIndex(u=>u.toUpperCase()===l.substring(0,3).toUpperCase()),M<0)return null;i=3,h.M=M;break;case"MMMM":if(M=w.findIndex(u=>u.toUpperCase()===l.substring(0,u.length).toUpperCase()),M<0)return null;i=w[M].length,h.M=M;break;case"YY":if(/^(\d{2})$/g.test(l.substring(0,2)))i=2;else return null;h.y=parseInt(l.substring(0,i));break;case"YYYY":if(/^(\d{4})$/g.test(l.substring(0,4)))i=4;else return null;h.y=parseInt(l.substring(0,i));break;default:i=s.length;break}l=l.slice(i)}return new Date(h.y,h.M,h.d,h.h,h.m,h.s,h.ms)}function m(e,c){let M=e.getHours();return c&&(M=M%12,M=M||12),M}function a(e){return e.getHours()>=12?"pm":"am"}function p(e){return f[e]}function x(e){return w[e]}function _(e,c,M){if(!N(e)||!L(c)||!T(M))return e;switch(M){case"minutes":case"m":e.setMinutes(e.getMinutes()+c);break;case"hours":case"h":e.setHours(e.getHours()+c);break;case"days":case"d":e.setDate(e.getDate()+c);break;case"months":case"M":e.setMonth(e.getMonth()+c);break;case"years":case"Y":e.setFullYear(e.getFullYear()+c);break}return O}function P(e,c,M,h,H){if(!L(e)||!T(c)||!N(M)||!N(h))return[];let i=H?t=>y(t,H):t=>t,l=[],r=M;for(;R(r,h);)l.push(i(r)),_(r,e,c);return l}function A(e,c){let M=N(e)?y(e,c):e;return j(M,c)}function R(e,c){return e<c}function S(e,c){return e<=c}function b(e,c){return e>c}function $(e,c){return e>=c}function C(e,c){return e.getTime()===c.getTime()}function F(e,c){if(!N(e)||!T(c))return e;switch(c){case"week":case"w":_(e,-e.getDay(),"d");break;case"month":case"M":_(e,-e.getDate()+1,"d");break;case"year":case"Y":F(e,"M").add(e,-e.getMonth(),"M");break;case"decade":F(e,"Y").add(e,-(e.getFullYear()%10),"Y");break;case"century":F(e,"decade").add(e,-(e.getFullYear()%100),"Y");break}return O}function U(e,c){if(!N(e)||!T(c))return e;switch(c){case"month":case"M":F(e,"M").add(e,1,"M").add(e,-1,"d");break;case"year":case"Y":F(e,"Y").add(e,1,"Y").add(e,-1,"d");break;case"decade":F(e,"decade").add(e,10,"Y").add(e,-1,"d");break;case"century":F(e,"century").add(e,100,"Y").add(e,-1,"d");break}return O}function q(e){return N(e)?new Date(e.getTime()):null}function J(e,c){return("0"+e).slice(-c)}function N(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function T(e){return typeof e=="string"||e instanceof String||Object.prototype.toString.call(e)==="[object String]"}function L(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}},tools.date=k=>new tools.class.DateManager(k);tools.class.EventManager=function(){let d=new G().events,f={};this.addEventListener=w,this.fireEvent=D,this.removeEventListener=y,j();function w(m,a,p){a in f?typeof p=="function"?f[a][m]?alert(`ScEvents: event listener "${m}" already exists. Please provide a listener with a unique name.`):f[a][m]=p:alert(`ScEvents: event listener "${m}" didn't provide a valid function type as a call back.`):alert(`ScEvents: event "${a}" does not exist. Please check available events in component ScEventsLibrary.`)}function D(m,a){if(m&&a){let p=f[m];if(p)for(let x in p)x in p&&p[x](a)}}function y(m,a){m&&a&&delete f[a][m]}function j(){for(let m in d)m in d&&(f[m]={})}},tools.event=k=>new tools.class.EventManager(k);function G(){this.events={testEvent:"testEvent"}}tools.class.HistoryManager=function(O){let d=new Event("popstate"),f=new Event("locationchange");this.back=m,this.clearState=D,this.forward=a,this.go=j,this.pushState=w,this.replaceState=y,x(),_();function w(P,A,R){p(A),history.pushState(P,A,R),window.dispatchEvent(d)}function D(P,A){p(A),history.replaceState({path:"/"},A,"/"),window.dispatchEvent(d)}function y(P,A,R){p(A),history.replaceState(P,A,R),window.dispatchEvent(d)}function j(P){history.go(P)}function m(){history.back()}function a(){history.forward()}function p(P){let A=document.querySelector("title");P&&A&&(A.innerText=P)}function x(){window.addEventListener("popstate",()=>{window.dispatchEvent(f)})}function _(){history.state===null?y(O,"",O):window.dispatchEvent(f)}},tools.history=k=>new tools.class.HistoryManager(k);tools.class.IPFS=function(){},tools.ipfs=k=>new tools.class.IPFS(k);tools.class.ObjectManager=function(){let O={};this.get=f=>O[f],this.save=d,this.remove=f=>delete O[f],this.getLibrary=()=>O,this.clearLibrary=()=>O={};function d(f,w){let D=w||f.constructor.name;O[D]=f}},tools.object=k=>new tools.class.ObjectManager(k);tools.class.RouterManager=function(O){let d=this;window.addEventListener("locationchange",c);let f,w={name:"",path:"",from:{},to:{},params:{},query:""},D=O.historyManager,y=[],j,m=[{name:"onBeforeRouteUpdate",used:!1}],a={},p;this.add=P,this.back=U,this.current=w,this.go=J,this.hash="",this.next=q,this.push=N,this.replace=T,this.routes=b,this.init=_,x();function x(){Y(O),H(),b(f.routes)}function _(){if(!D){d.current.path=location.pathname;let{matched:n,path:o,newMatchedObject:g,originalObject:v}=F({path:location.pathname});s(v),o!=="/"&&M(g),D=tools.history(o),o==="/"&&l("onBeforeRouteUpdate",d.current,g,o)}}function P(n){if(n.constructor.name==="Array"&&n.length){if(!R(n)||!A(n))return;n.forEach(o=>{if(o.constructor.name==="Object"){let g=!1;y.forEach(v=>{(v.path===o.path||v.alias===o.path)&&(g=!0)}),g||y.push(o)}})}}function A(n){let o=[...new Map(n.map(v=>[v.name,v])).values()],g=[...new Map(n.map(v=>[v.path,v])).values()];return!(o.length<n.length||g.length<n.length)}function R(n){return!!n.every(g=>g.constructor.name==="Object"&&"path"in g&&typeof g.path=="string"&&g.path.trim()!=="")}function S(n){if(f.basePath.length){let o=[];return f.basePath.forEach(g=>{g.charAt()!=="/"&&(g=g.replace(/^/,"/")),o.push(`${g}${n}`)}),f.baseStrict||o.push(n),o}else return n}function b(n){if(!n)return y;if(y.length>0){P(n);return}if(Array.isArray(n)&&n.length){P(n);return}}function $(n){return n.path===d.current.path}function C(n){if(!y.length)return!1;if(n&&n.constructor.name==="Object"){let o=[{name:"path",type:"String"},{name:"name",type:"String"},{name:"params",type:"Object"},{name:"query",type:"String"},{name:"hash",type:"String"}],g=[];return!!Object.entries(n).every(I=>{let E=o.filter(B=>B.name===I[0]&&B.type===I[1].constructor.name);return E.length||g.push(I),E.length>0})}return!1}function F({path:n,name:o}){if(f.basePath.length&&o)return console.error("When basePath is true, {name} param not run. Please, change BaseStrict to false or send {path} param"),{matched:!1};let g=y.find(E=>E.path===n||E.path+"/"===n||E.alias===n||E.alias===n+"/"||E.name===o),v=y.find(E=>S(E.path).includes(n)||S(E.path+"/").includes(n)||E.name===o);if(v)return n=n||v.path,{matched:!0,path:n,newMatchedObject:h(v,n),originalObject:g||{}};if(n){let E=y.find(B=>{if(B.alias)return S(B.alias).includes(n)||S(B.alias).includes(n+"/")});if(E)return{matched:!0,path:n,newMatchedObject:h(E,n),originalObject:g||{}}}let I=y.find(E=>E.notfound);return I?{matched:!0,path:n,newMatchedObject:h(I,n),originalObject:g||{}}:{matched:!1}}function U(){D.back()}function q(){D.forward()}function J(n){!Number.isInteger(n)||D.go(n)}function N(n,o=!0){if(C(n)){if($(n))return;let{matched:g,path:v,newMatchedObject:I,originalObject:E}=F(n);g&&(t(),s(E),o?l("onBeforeRouteUpdate",d.current,I,v):e(I,v))}}function T(n){D.replaceState(n,"",n.path)}function L(){Object.prototype.hasOwnProperty.call(d.current,"action")&&d.current.action.constructor.name==="Function"&&d.current.action(d)}function e(n,o){M(n),D.pushState(o,"",o)}function c(){r(),L()}function M(n,o){o&&(d.current=w),d.current=tools.utils().extend(!0,d.current,n)}function h(n,o){return tools.utils().extend(!0,n,{path:o})}function H(n){j=document.createElement("div");let o={};m.forEach(g=>{o[g.name]=v=>{g.used=!0,i(g.name,I=>v(I.to,I.from,u))}}),f.events(o)}function i(n,o){j.addEventListener(n,g=>o(g.detail))}function l(n,o,g,v){p=g,m.find(E=>E.name===n).used?j.dispatchEvent(new CustomEvent(n,{detail:o})):(s({}),e(p,v))}function r(){let n=tools.utils().extend(!0,{},d.current);delete n.from,delete n.to,a=tools.utils().extend(!0,a,n)}function t(n){d.current.from=a}function s(n){d.current.to=n}function u(n){if(n){d.push(n,!1);return}let o=d.current.to.path;t(),s({}),e(p,o)}function Y(n={}){f={basePath:[],baseStrict:!1,events:()=>{}},f=tools.utils().extend(!0,f,n)}},tools.router=k=>new tools.class.RouterManager(k);tools.class.String=function(){"use strict";this.filterArray=O,this.findInArray=d,this.getSearchFunction=f;function O(y,j,m,a){let p=f(a);return y.filter(x=>p(m(x),j))}function d(y,j,m,a){let p=f(a);return y.find(x=>p(m(x),j))}function f(y){switch(y){case"contains":return w;case"equals":return D;default:return()=>!0}}function w(y,j){return y.toLowerCase().includes(j.toLowerCase())}function D(y,j){return y.toLowerCase()===j.toLowerCase()}},tools.string=k=>new tools.class.String(k);tools.class.Utilities=function(){this.clone=f,this.extend=O,this.formatPercentage=m,this.getUniqueId=d,this.isArray=D,this.isNumber=j,this.isObject=w,this.isString=y;function O(){let a={},p=!1,x=0,_=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(p=arguments[0],x++);function P(S){for(var b in S)Object.prototype.hasOwnProperty.call(S,b)&&(p&&w(S[b])?a[b]=O(!0,a[b],S[b]):p&&D(S[b])?A(S[b],a,b):a[b]=S[b])}function A(S,b,$){b[$]=[],S.forEach((C,F)=>{p&&w(C)?b[$][F]=O(!0,b[$][F],C):p&&D(C)?A(C,b[$],F):b[$][F]=C})}for(;x<_;x++){var R=arguments[x];P(R)}return a}function d(a){return a=a&&!isNaN(a)?a:1e5,Math.floor(Math.random()*a)}function f(a){return O(!0,{},a)}function w(a){return Object.prototype.toString.call(a)==="[object Object]"}function D(a){return Object.prototype.toString.call(a)==="[object Array]"}function y(a){return typeof a=="string"||a instanceof String||Object.prototype.toString.call(a)==="[object String]"}function j(a){return typeof a=="number"&&a===a&&a!==1/0&&a!==-1/0}function m(a,p=0){return j(a)?(a*100).toFixed(p)+"%":""}},tools.utils=k=>new tools.class.Utilities(k);
return tools;}
//# sourceMappingURL=mambo-tools-min-0.0.1.js.map
